<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header">

  </div>
  <!-- /.content-header -->

  <!-- Main content -->
  <section class="content" data-select2-id="32">
    <div class="container-fluid" data-select2-id="31">
      <!-- SELECT2 EXAMPLE -->
      <div class="card card-default">
        <div class="card-header">
          <h3 class="card-title">Dynamic Form</h3>

        </div>
        <!-- /.card-header -->
        <div class="card-body">

          <flash-messages></flash-messages>

          <form [formGroup]="registerForm" (ngSubmit)="onSubmit(registerForm.value)">
            <div class="form-row">

              <div class="form-group col-md-4">
                <label for="inputEmail4">Company Name</label>
                <input type="text" formControlName="com_name" class="form-control" />
                <div *ngIf="submitted && formControl.com_name.errors?.required" class="text-danger">
                  Company Name is required
                </div>
              </div>

              <div class="form-group col-md-4">
                <label for="inputPassword4">Company Location</label>
                <input type="text" formControlName="com_location" class="form-control" />
                <div *ngIf="submitted && formControl.com_name.errors" class="text-danger">
                  Company Location is required
                </div>
              </div>

            </div>

            <ng-container formArrayName="person">
              <div class="form-row" *ngFor="let customer of formControl['person']['controls']; let i = index;">

                <ng-container [formGroupName]="i">
                  <div class="form-group col-md-3">
                    <label for="inputEmail4">Customer Name</label>

                    <input type="text" formControlName="name" class="form-control" />

                    <div *ngIf="submitted && formControl['person']['controls'][i]['controls'].name.errors?.required"
                      class="text-danger">Customer Name is required</div>


                  </div>
                  <div class="form-group col-md-3">
                    <label for="inputPassword4">Customer Phone</label>
                    <input type="text" formControlName="phone" class="form-control" />

                    <div *ngIf="submitted && formControl['person']['controls'][i]['controls'].phone.errors"
                      class="text-danger">Phone is required</div>

                  </div>
                  <div class="form-group col-md-3">
                    <label for="inputPassword4">Customer Email</label>
                    <input type="text" formControlName="email" class="form-control" />

                    <div *ngIf="submitted && formControl['person']['controls'][i]['controls'].email.errors"
                      class="text-danger">Email is required</div>

                  </div>

                  <div class="form-group col-md-3" style="top: 32px;">
                    <a class="btn btn-success" (click)="onAddRow()" role="button"><i style="color:azure"
                        class="fa fa-plus"></i></a> &nbsp;
                    <a *ngIf="i!=0" class="btn btn-danger" (click)="onRemoveRow(i)" role="button"><i style="color:azure"
                        class="fa fa-trash"></i></a>

                  </div>
                </ng-container>
              </div>
            </ng-container>


            <button type="submit" class="btn btn-primary">Form Submit</button>
          </form>


        </div>
        <!-- /.card-body -->
        <div class="card-footer">

        </div>
      </div>

    </div><!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>